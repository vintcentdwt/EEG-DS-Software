# EEG-DS-Software

基于ESP32S3与ADS1299的8通道无线脑电采集设备上位机软件

## 功能特点

### 实时采集模式
1. 自动扫描连接当前PC热点的ESP32S3设备
2. 支持选择并连接指定设备
3. 实时显示8个通道的脑电数据波形
4. 每个通道使用不同颜色显示
5. 数据可保存到指定文件夹
6. 支持模拟数据模式，可加载CSV格式的预录数据进行演示

### 离线分析模式
1. 打开原始脑电数据文件进行展示
2. 提供多种数据分析图形：
   - 原始脑电波形图
   - 滤波后时频图
   - 功率谱图
   - 脑热力图
3. 支持保存分析结果
4. 支持使用模拟数据进行离线分析

## 界面设计

- 圆角界面设计
- 白色背景，黑色字体与坐标轴
- 波形图带有网格背景并标注单位

## 安装说明

### 开发环境运行
1. 确保已安装Python 3.7或更高版本
2. 安装依赖包：
   ```
   pip install -r requirements.txt
   ```
3. 运行软件：
   ```
   python eeg_ds_software.py
   ```

### 可执行文件运行（推荐）
1. 从release页面下载打包好的可执行文件
2. 解压到任意目录
3. 运行 `EEG-DS-Software.exe` 启动程序

## 使用说明

### 实时采集模式
1. 点击"实时采集模式"按钮进入该模式
2. 点击"扫描设备"查找可用的ESP32S3设备
3. 从下拉列表中选择要连接的设备
4. 点击"连接设备"建立连接
5. 点击"开始采集"开始接收脑电数据
6. 点击"停止采集"停止数据接收
7. 点击"保存数据"将采集到的数据保存到文件

#### 模拟数据模式
1. 勾选"使用模拟数据"复选框
2. 点击"浏览目录"选择包含CSV格式脑电数据的文件夹
3. 从下拉列表中选择要加载的数据文件
4. 点击"加载数据"加载选中的数据文件
5. 点击"开始采集"开始播放模拟数据

### 离线分析模式
1. 点击"离线分析模式"按钮进入该模式
2. 点击"浏览"选择要分析的数据文件
3. 点击"加载数据"读取文件内容
4. 点击"开始分析"进行数据分析
5. 点击"保存分析结果"保存分析图表

#### 模拟数据分析模式
1. 勾选"使用模拟数据进行分析"复选框
2. 点击"浏览目录"选择包含CSV格式脑电数据的文件夹
3. 从下拉列表中选择要分析的数据文件
4. 点击"加载模拟数据"加载选中的数据文件
5. 点击"开始分析"进行数据分析

## 文件格式

数据文件采用CSV格式存储，每行包含时间戳和脑电数据值，以逗号分隔：
```
time,value
0.00,3.14
0.05,2.78
...
```

每个通道的数据保存在单独的文件中，文件名格式为：
```
channel_X_YYYYMMDD_HHMMSS.txt
```

其中X为通道号(1-8)，YYYYMMDD为日期，HHMMSS为时间。

## 模拟数据格式

模拟数据应为CSV格式，包含至少9列：
- 第1列：时间戳数据
- 第2-9列：8个通道的脑电数据

## 代码质量

- 已修复所有未使用的导入警告
- 代码结构清晰，遵循Python编码规范
- 包含完整的错误处理机制

## 打包为可执行文件

要将项目打包为Windows可执行文件，可以使用以下步骤：

1. 安装PyInstaller：
   ```
   pip install pyinstaller
   ```

2. 执行打包命令：
   ```
   pyinstaller --noconfirm --onedir --windowed --name "EEG-DS-Software" eeg_ds_software.py
   ```

3. 打包完成后，可执行文件将位于 `dist/EEG-DS-Software/` 目录中

或者直接运行项目中的 `build.py` 脚本：
```
python build.py
```

生成的可执行文件为便携式应用程序，整个文件夹可以移动到其他位置或计算机上直接运行。